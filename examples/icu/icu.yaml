title: ICU
tpu: 5
time_unit: hours
headless: false

batches:
- grid:
  - beds.slots:
      range: [4, 20]
      step: 4
    patient_generator.subsets.A.treatment_time: [10, 20]
runs_per_batch: 3

generators:
  - patient_generator:
      class: PatientData
      key: illness
      subsets:
        - illness: A
          enter_time:
            sample: accumulate
            value: 12
          treatment_time: 24
        - illness: B
          enter_time:
            sample: accumulate
            distribution: normal
            parameters:
              loc: 12
              scale: 2
            min: 1
          treatment_time:
            sample: independent
            distribution: normal
            parameters:
              loc: 96
              scale: 24
            min: 1
        - illness: C
          enter_time:
            sample: accumulate
            distribution: normal
            parameters:
              loc: 60
              scale: 30
            min: 1
            scaling: 0.1
          treatment_time:
            sample: independent
            distribution: uniform
            parameters:
              low: 24
              high: 96

constants:
  - critical_duration:
      A: ~
      B: 400
      C: 200

resources:
  - beds:
      resource_type: bed
      slots: 5
      data_id: ICU
      plot_options:
        title: ICU
        name: Beds in use
        plot_type: line
        plot_color: blue
        legend_y: beds
        secondary_y: true

queues:
  - patients_waiting:
      data_id: ICU
      plot_options:
        name: Patients waiting
        plot_type: line
        plot_color: orange
        legend_y: patients

quantities:
  - patients_treated:
      quantity_type: patient
      start_value: 0
      data_id: ICU
      plot_options:
        name: Patients treated
        plot_type: line
        plot_color: green
        legend_y: patients
  - patients_died:
      quantity_type: patient
      start_value: 0
      data_id: ICU
      plot_options:
        name: Patients died
        plot_type: line
        plot_color: red
        legend_y: patients
